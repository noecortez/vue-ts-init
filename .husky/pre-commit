#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

echo 'ðŸš§ Aplicando ESLint y Prettier'

# ESLint
npm run lint ||
(
  echo 'ðŸš« No puedes continuar sin antes corrgir los errores!';
  false;
)

# Prettier
npm run format ||
(
  echo 'ðŸš¨ Aplica formato al cÃ³digo!';
  false;
)

# Verificamos si existen nuevos cambios despues del formato
if [ -n "$(git diff)" ]; then
  echo 'ðŸŽ¨ Aplicando formato al cÃ³digo. AÃ±adiendo los archivos:';
  git status -s
  git add .
fi

echo '';
echo 'âœ… Listo para subir cambios';
echo '';